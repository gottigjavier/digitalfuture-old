---
import { Button, Modal, ModalHeader, ModalBody, ModalFooter } from 'free-astro-components';

/* import { isRegistered, registerUser } from "../../data/users"
import { isValidEmail } from "../../utils/isValidEmail"; */

---

<Modal id="modal-custom" class="custom-modal">
  <ModalHeader>
    <h3><strong>Formulario de Contacto</strong></h3>
  </ModalHeader>
  <ModalBody>
    <form method="POST">
      <label>
        Nombre:
        <p>
          <input type="text" name="name" required />
        </p>
        </label>
        <label>
          Correo electrónico:
          <p>
            <input type="email" name="email" required />
          </p>
        </label>
        <label>
          Teléfono:
          <p>
            <input type="tel" name="tel" minlength="7" />
          </p>
        </label>
        <label>
          Motivo de Contacto:
          <p>
            <textarea id="mytext" name="mytext" maxlength="500" wrap="soft" cols="20" rows="3"/>
          </p>
        </label>
      <p>
        <button>Enviar</button>
      </p>
    </form>
  </ModalBody>
  <ModalFooter>
    <Button label="Cerrar" data-modal-close />
  </ModalFooter>
</Modal>
<!-- 
<script is:inline>
  function returnTo(){
    console.log("submit");
    return
  }

  const errors = { name: "", email: "", tel: "", mytext:"" };
if (Astro.request.method === "POST") {
  try {
    const data = await Astro.request.formData();
    const name = data.get("name");
    const email = data.get("email");
    const tel = data.get("tel");
    const mytext = data.get("mytext");
    if (typeof name !== "string" || name.length < 1) {
      errors.name += "Please enter your name. ";
    }
    if (typeof email !== "string") {
      errors.email += "Email is not valid. ";
    }
    if (typeof tel !== "number" || tel < 9999999) {
      errors.tel += "Tel must be at least 7 numbers. ";
    }
    const hasErrors = Object.values(errors).some(msg => msg)
    if (!hasErrors) {
      await console.log("data sended");
      return Astro.redirect("/");
    }
  } catch (error) {
    if (error instanceof Error) {
      console.error(error.message);
    }
  }
}

</script>
 -->
<style>
  .custom-modal {
    --ac-modal-border-radius: 0;
    --ac-modal-backdrop-filter: grayscale(100%);
  }

  h3 {
    color: rgb(0, 174, 255);
  }

  p {
    margin: 0 0 1rem 0;
  }

  input, textarea{
    width: 100%;
    padding: 2px;
    color: black;
    background-color: rgb(211, 211, 211);
  }

  button {
    font-weight: 700;
    margin: 0;
    padding: 12px 25px;
    border-radius: 15%;
    background-color: rgb(0, 211, 105);
  }

  

</style>